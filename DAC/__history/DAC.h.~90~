#include <24EP256GP202.h>
#device ICSP=1
#use delay(internal=140000000)

#FUSES HS, NOWDT                    //No Watch Dog Timer
#FUSES NOJTAG                   //JTAG disabled
#FUSES CKSFSM                   //Clock Switching is enabled, fail Safe clock monitor is enabled

#define SAMPLES 50*3      //Multiplied by 3
#define SCK   PIN_B7
#define SDO   PIN_B8
#define SDI   PIN_B9
#define CS    PIN_B6
#define TOGGLE PIN_A0
#pin_select U1TX=PIN_B11
#pin_select U1RX=PIN_B12
#use rs232(UART1, baud=115200, stream=UART_PORT1)

#use spi(FORCE_HW, MASTER, SPI1, MODE=1, stream=SPI_PORT1, BAUD = 14000000)
//IMPORTAnt: Changed to only on a 0 to 5v range
//!const unsigned int8 Table[SAMPLES] =
//!{0x80, 0x80, 0x00,
//!0x20, 0x88, 0x09,
//!0x20, 0x90, 0x0a,
//!0x20, 0x97, 0xfc,
//!0x20, 0x9f, 0xd4,
//!0x20, 0xa7, 0x8d,
//!0x20, 0xaf, 0x1e,
//!0x20, 0xb6, 0x7f,
//!0x20, 0xbd, 0xa9,
//!0x20, 0xc4, 0x95,
//!0x20, 0xcb, 0x3c,
//!0x20, 0xd1, 0x96,
//!0x20, 0xd7, 0x9e,
//!0x20, 0xdd, 0x4e,
//!0x20, 0xe2, 0x9f,
//!0x20, 0xe7, 0x8d,
//!0x20, 0xec, 0x12,
//!0x20, 0xf0, 0x2a,
//!0x20, 0xf3, 0xd0,
//!0x20, 0xf7, 0x02,
//!0x20, 0xf9, 0xbb,
//!0x20, 0xfb, 0xfa,
//!0x20, 0xfd, 0xbb,
//!0x20, 0xfe, 0xfd,
//!0x20, 0xff, 0xbe,
//!0x20, 0xff, 0xff,
//!0x20, 0xff, 0xbe,
//!0x20, 0xfe, 0xfd,
//!0x20, 0xfd, 0xbb,
//!0x20, 0xfb, 0xfa,
//!0x20, 0xf9, 0xbb,
//!0x20, 0xf7, 0x02,
//!0x20, 0xf3, 0xd0,
//!0x20, 0xf0, 0x2a,
//!0x20, 0xec, 0x12,
//!0x20, 0xe7, 0x8d,
//!0x20, 0xe2, 0x9f,
//!0x20, 0xdd, 0x4e,
//!0x20, 0xd7, 0x9e,
//!0x20, 0xd1, 0x96,
//!0x20, 0xcb, 0x3c,
//!0x20, 0xc4, 0x95,
//!0x20, 0xbd, 0xa9,
//!0x20, 0xb6, 0x7f,
//!0x20, 0xaf, 0x1e,
//!0x20, 0xa7, 0x8d,
//!0x20, 0x9f, 0xd4,
//!0x20, 0x97, 0xfc,
//!0x20, 0x90, 0x0a,
//!0x20, 0x88, 0x09,
//!0x20, 0x80, 0x00,
//!0x20, 0x77, 0xf6,
//!0x20, 0x6f, 0xf5,
//!0x20, 0x68, 0x03,
//!0x20, 0x60, 0x2b,
//!0x20, 0x58, 0x72,
//!0x20, 0x50, 0xe1,
//!0x20, 0x49, 0x80,
//!0x20, 0x42, 0x56,
//!0x20, 0x3b, 0x6a,
//!0x20, 0x34, 0xc3,
//!0x20, 0x2e, 0x69,
//!0x20, 0x28, 0x61,
//!0x20, 0x22, 0xb1,
//!0x20, 0x1d, 0x60,
//!0x20, 0x18, 0x72,
//!0x20, 0x13, 0xed,
//!0x20, 0x0f, 0xd5,
//!0x20, 0x0c, 0x2f,
//!0x20, 0x08, 0xfd,
//!0x20, 0x06, 0x44,
//!0x20, 0x04, 0x05,
//!0x20, 0x02, 0x44,
//!0x20, 0x01, 0x02,
//!0x20, 0x00, 0x41,
//!0x20, 0x00, 0x00,
//!0x20, 0x00, 0x41,
//!0x20, 0x01, 0x02,
//!0x20, 0x02, 0x44,
//!0x20, 0x04, 0x05,
//!0x20, 0x06, 0x44,
//!0x20, 0x08, 0xfd,
//!0x20, 0x0c, 0x2f,
//!0x20, 0x0f, 0xd5,
//!0x20, 0x13, 0xed,
//!0x20, 0x18, 0x72,
//!0x20, 0x1d, 0x60,
//!0x20, 0x22, 0xb1,
//!0x20, 0x28, 0x61,
//!0x20, 0x2e, 0x69,
//!0x20, 0x34, 0xc3,
//!0x20, 0x3b, 0x6a,
//!0x20, 0x42, 0x56,
//!0x20, 0x49, 0x80,
//!0x20, 0x50, 0xe1,
//!0x20, 0x58, 0x72,
//!0x20, 0x60, 0x2b,
//!0x20, 0x68, 0x03,
//!0x20, 0x6f, 0xf5,
//!0x20, 0x77, 0xf6
//!};
//!

//!const unsigned int8 Table[SAMPLES] =
//!{
//!0x80, 0x80, 0x00,
//!0x20, 0xcb, 0x3c,
//!0x20, 0xf9, 0xbb,
//!0x20, 0xf9, 0xbb,
//!0x20, 0xcb, 0x3c,
//!0x20, 0x80, 0x00,
//!0x20, 0x34, 0xc3,
//!0x20, 0x06, 0x44,
//!0x20, 0x06, 0x44,
//!0x20, 0x34, 0xc3
//!};
const unsigned int8 Table[SAMPLES] =
{0x80, 0x80, 0x00,
0x20, 0x90, 0x0a,
0x20, 0x9f, 0xd4,
0x20, 0xaf, 0x1e,
0x20, 0xbd, 0xa9,
0x20, 0xcb, 0x3c,
0x20, 0xd7, 0x9e,
0x20, 0xe2, 0x9f,
0x20, 0xec, 0x12,
0x20, 0xf3, 0xd0,
0x20, 0xf9, 0xbb,
0x20, 0xfd, 0xbb,
0x20, 0xff, 0xbe,
0x20, 0xff, 0xbe,
0x20, 0xfd, 0xbb,
0x20, 0xf9, 0xbb,
0x20, 0xf3, 0xd0,
0x20, 0xec, 0x12,
0x20, 0xe2, 0x9f,
0x20, 0xd7, 0x9e,
0x20, 0xcb, 0x3c,
0x20, 0xbd, 0xa9,
0x20, 0xaf, 0x1e,
0x20, 0x9f, 0xd4,
0x20, 0x90, 0x0a,
0x20, 0x80, 0x00,
0x20, 0x6f, 0xf5,
0x20, 0x60, 0x2b,
0x20, 0x50, 0xe1,
0x20, 0x42, 0x56,
0x20, 0x34, 0xc3,
0x20, 0x28, 0x61,
0x20, 0x1d, 0x60,
0x20, 0x13, 0xed,
0x20, 0x0c, 0x2f,
0x20, 0x06, 0x44,
0x20, 0x02, 0x44,
0x20, 0x00, 0x41,
0x20, 0x00, 0x41,
0x20, 0x02, 0x44,
0x20, 0x06, 0x44,
0x20, 0x0c, 0x2f,
0x20, 0x13, 0xed,
0x20, 0x1d, 0x60,
0x20, 0x28, 0x61,
0x20, 0x34, 0xc3,
0x20, 0x42, 0x56,
0x20, 0x50, 0xe1,
0x20, 0x60, 0x2b,
0x20, 0x6f, 0xf5
};
